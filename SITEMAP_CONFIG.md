# Sitemap Configuration for Dairy Farm Management

## Overview
This project now includes a dynamic sitemap that is automatically generated by Next.js. The sitemap includes all public and protected routes to help search engines index your site properly.

## Files Created

### 1. `src/app/sitemap.ts`
- **Purpose**: Dynamically generates the XML sitemap for your application
- **Format**: Uses Next.js `MetadataRoute.Sitemap` type for type safety
- **Access**: Available at `/sitemap.xml` when your app is deployed

### 2. `public/robots.txt`
- **Purpose**: Directs search engine bots on what to crawl and what to avoid
- **Key Features**:
  - Allows crawling of public and user-accessible pages
  - Disallows crawling of API routes and sensitive paths
  - Points to the sitemap location

### 3. Updated `NEXT_PUBLIC_BASE_URL` in `.env.local`
- **Purpose**: Configures the base URL for sitemap generation
- **Note**: Change this to your production domain when deploying (e.g., `https://dairyfarmmgt.com`)

## Sitemap Structure

The sitemap is organized into three categories:

### Public Pages (Priority 0.7-1.0)
- Homepage `/` (Priority: 1.0 - highest)
- Auth pages `/auth` (Priority: 0.8)
- Onboarding `/onboarding` (Priority: 0.7)

### Dashboard Pages (Priority 0.7-0.9)
Protected pages accessible to authenticated users:
- Dashboard `/dashboard`
- Animals Management `/dashboard/animals`
- Breeding `/dashboard/breeding`
- Equipment `/dashboard/equipment`
- Feed Management `/dashboard/feed`
- Financial `/dashboard/financial`
- Health `/dashboard/health`
- Inventory `/dashboard/inventory`
- Production `/dashboard/production`
- Reports `/dashboard/reports`
- Settings `/dashboard/settings`
- Support `/dashboard/support`

### Admin Pages (Priority 0.6-0.8)
Protected pages for admin users only:
- Admin Dashboard `/admin/dashboard`
- User Management `/admin/users`
- Farm Management `/admin/farms`
- Analytics `/admin/analytics`
- Audit Logs `/admin/audit`
- System Monitoring `/admin/monitoring`
- Inquiries `/admin/inquiries`
- Support Management `/admin/support`
- Billing `/admin/billing`
- Authentication Settings `/admin/auth`
- Admin Settings `/admin/settings`

## Change Frequency

Pages are assigned change frequencies for search engine optimization:

| Frequency | Pages |
|-----------|-------|
| **weekly** | Home, Animals, Breeding, Feed, Production, Dashboard, Users, Farms, Analytics, Monitoring |
| **monthly** | Equipment, Reports, Settings, Support, Billing |
| **daily** | Audit, Inquiries, Admin Support |
| **yearly** | Auth (least frequently updated) |

## Deployment Instructions

### Development
The sitemap is available at `http://localhost:3000/sitemap.xml` while running the dev server.

### Production Deployment

1. **Update Environment Variable**
   ```bash
   # In your production environment (.env.production or platform-specific)
   NEXT_PUBLIC_BASE_URL=https://your-production-domain.com
   ```

2. **Verify Sitemap Generation**
   After deployment, check your sitemap at:
   ```
   https://your-production-domain.com/sitemap.xml
   ```

3. **Submit to Search Engines**
   - **Google Search Console**: 
     - Go to Google Search Console
     - Select your property
     - Navigate to Sitemaps
     - Add your sitemap URL
   
   - **Bing Webmaster Tools**:
     - Go to Bing Webmaster Tools
     - Select your site
     - Go to Sitemaps
     - Submit the sitemap URL

4. **Update robots.txt**
   The `robots.txt` already points to your sitemap, but make sure to update the domain:
   ```
   Sitemap: https://your-production-domain.com/sitemap.xml
   ```

## Technical Details

### Why This Approach?

1. **Dynamic Generation**: The sitemap is generated at build time and served dynamically, ensuring it always reflects your current routes
2. **Type Safety**: Uses Next.js built-in types for error prevention
3. **SEO Friendly**: Includes proper `lastModified`, `changeFrequency`, and `priority` attributes
4. **Scalable**: Easy to maintain and extend with new routes

### Adding New Routes

To add new routes to the sitemap:

1. **Edit `src/app/sitemap.ts`**
2. **Add new entry to appropriate category** (public, dashboard, or admin)
3. **Redeploy your application**

Example:
```typescript
{
  url: `${baseUrl}/dashboard/new-feature`,
  lastModified: new Date(),
  changeFrequency: 'weekly',
  priority: 0.8,
}
```

## Important Notes

⚠️ **Authentication Awareness**
- The sitemap includes protected pages (dashboard, admin)
- Search engines can see these URLs in the sitemap
- Access control is handled by your authentication middleware
- Search engine bots cannot access these protected pages without authentication

✅ **Best Practices**
- Keep the `NEXT_PUBLIC_BASE_URL` consistent across all environments
- Update change frequencies based on actual content update patterns
- Monitor your search console for crawl errors
- Consider creating additional sitemaps if you have dynamic content (e.g., per-farm pages)

## Monitoring and Maintenance

### Check Sitemap Validity
Test your sitemap with online validators:
- [XML-Sitemaps.com Validator](https://www.xml-sitemaps.com/validate-xml-sitemap.html)
- Google Search Console coverage report

### Monitor in Search Console
- Track crawl errors
- Monitor index coverage
- Check for manual actions or security issues

## Future Enhancements

Consider implementing in the future:
- Image sitemaps (for farm photos)
- Video sitemaps (if you add video content)
- Dynamic sitemaps for per-farm landing pages
- News sitemaps (if you add a blog)
